{"version":3,"file":"extra-loader-d39d49fc.js","sources":["../../../src/js/uml.js","../../../src/js/extra-loader.js","../../../src/js/arithmatex.js"],"sourcesContent":["/* Notes (as of Mermaid 8.7.0):\n * - Gantt: width is always relative to the parent, if you have a small parent, the chart will be squashed.\n *   Can't help it.\n * - Journey: Suffers from the same issues that Gantt does.\n * - Pie: These charts have no default height or width. Good luck pinning them down to a reasonable size.\n * - Git: The render portion is agnostic to the size of the parent element. But padding of the SVG is relative\n *   to the parent element. You will never find a happy size.\n */\n\n/**\n * Targets special code or div blocks and converts them to UML.\n * @param {string} className is the name of the class to target.\n * @return {void}\n */\nexport default className => {\n\n  // Custom element to encapsulate Mermaid content.\n  class MermaidDiv extends HTMLElement {\n\n    /**\n    * Creates a special Mermaid div shadow DOM.\n    * Works around issues of shared IDs.\n    * @return {void}\n    */\n    constructor() {\n      super()\n\n      // Create the Shadow DOM and attach style\n      const shadow = this.attachShadow({mode: \"open\"})\n      const style = document.createElement(\"style\")\n      style.textContent = `\n      :host {\n        display: block;\n        line-height: initial;\n        font-size: 16px;\n      }\n      div.diagram {\n        margin: 0;\n        overflow: visible;\n      }`\n      shadow.appendChild(style)\n    }\n  }\n\n  if (typeof customElements.get(\"diagram-div\") === \"undefined\") {\n    customElements.define(\"diagram-div\", MermaidDiv)\n  }\n\n  const getFromCode = parent => {\n    // Handles <pre><code> text extraction.\n    let text = \"\"\n    for (let j = 0; j < parent.childNodes.length; j++) {\n      const subEl = parent.childNodes[j]\n      if (subEl.tagName.toLowerCase() === \"code\") {\n        for (let k = 0; k < subEl.childNodes.length; k++) {\n          const child = subEl.childNodes[k]\n          const whitespace = /^\\s*$/\n          if (child.nodeName === \"#text\" && !(whitespace.test(child.nodeValue))) {\n            text = child.nodeValue\n            break\n          }\n        }\n      }\n    }\n    return text\n  }\n\n  // We use this to determine if we want the dark or light theme.\n  // This is specific for our MkDocs Material environment.\n  // You should load your configs based on your own environment's needs.\n  const defaultConfig = {\n    startOnLoad: false,\n    theme: \"default\",\n    flowchart: {\n      htmlLabels: false\n    },\n    er: {\n      useMaxWidth: false\n    },\n    sequence: {\n      useMaxWidth: false,\n      noteFontWeight: \"14px\",\n      actorFontSize: \"14px\",\n      messageFontSize: \"16px\"\n    }\n  }\n  mermaid.mermaidAPI.globalReset()\n  // Non Material themes should just use \"default\"\n  let scheme = null\n  try {\n    scheme = document.querySelector(\"[data-md-color-scheme]\").getAttribute(\"data-md-color-scheme\")\n  } catch (err) {\n    scheme = \"default\"\n  }\n  const config = (typeof mermaidConfig === \"undefined\") ?\n    defaultConfig :\n    mermaidConfig[scheme] || (mermaidConfig.default || defaultConfig)\n  mermaid.initialize(config)\n\n  // Find all of our Mermaid sources and render them.\n  const blocks = document.querySelectorAll(`pre.${className}, diagram-div`)\n  const surrogate = document.querySelector(\"html body\")\n  for (let i = 0; i < blocks.length; i++) {\n    const block = blocks[i]\n    const parentEl = (block.tagName.toLowerCase() === \"diagram-div\") ?\n      block.shadowRoot.querySelector(`pre.${className}`) :\n      block\n\n    // Create a temporary element with the typeset and size we desire.\n    // Insert it at the end of our parent to render the SVG.\n    const temp = document.createElement(\"div\")\n    temp.style.visibility = \"hidden\"\n    temp.style.display = \"display\"\n    temp.style.padding = \"0\"\n    temp.style.margin = \"0\"\n    temp.style.lineHeight = \"initial\"\n    temp.style.fontSize = \"16px\"\n    surrogate.appendChild(temp)\n\n    try {\n      mermaid.mermaidAPI.render(\n        `_diagram_${i}`,\n        getFromCode(parentEl),\n        content => {\n          const el = document.createElement(\"div\")\n          el.className = className\n          el.innerHTML = content\n\n          // Insert the render where we want it and remove the original text source.\n          // Mermaid will clean up the temporary element.\n          const shadow = document.createElement(\"diagram-div\")\n          shadow.shadowRoot.appendChild(el)\n          block.parentNode.insertBefore(shadow, block)\n          parentEl.style.display = \"none\"\n          shadow.shadowRoot.appendChild(parentEl)\n          if (parentEl !== block) {\n            block.parentNode.removeChild(block)\n          }\n        },\n        temp\n      )\n    } catch (err) {} // eslint-disable-line no-empty\n\n    if (surrogate.contains(temp)) {\n      surrogate.removeChild(temp)\n    }\n  }\n}\n","import uml from \"./uml\"\nimport arithmatex from \"./arithmatex\"\n\n// Main function\n(() => {\n  let umlPromise = Promise.resolve()\n  let mathPromise = Promise.resolve()\n\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(mutation => {\n      if (mutation.type === \"attributes\") {\n        let scheme = mutation.target.getAttribute(\"data-md-color-scheme\")\n        if (!scheme) {\n          scheme = \"default\"\n        }\n        localStorage.setItem(\"data-md-color-scheme\", scheme)\n        if (typeof mermaid !== \"undefined\") {\n          uml(\"diagram\")\n        }\n      }\n    })\n  })\n\n  const main = () => {\n    observer.observe(document.querySelector(\"body\"), {attributeFilter: [\"data-md-color-scheme\"]})\n\n    if (typeof mermaid !== \"undefined\") {\n      umlPromise = umlPromise.then(() => {\n        uml(\"diagram\")\n      }).catch(err => {\n        console.log(`UML loading failed...${err}`) // eslint-disable-line no-console\n      })\n    }\n\n    if (typeof katex !== \"undefined\") {\n      mathPromise = mathPromise.then(() => {\n        arithmatex(\"arithmatex\", \"katex\")\n      }).catch(err => {\n        console.log(`Math loading failed...${err}`) // eslint-disable-line no-console\n      })\n    } else if (typeof MathJax !== \"undefined\" && 'typesetPromise' in MathJax) {\n      mathPromise = mathPromise.then(() => {\n        arithmatex(\"arithmatex\", \"mathjax\")\n      }).catch(err => {\n        console.log(`Math loading failed...${err}`) // eslint-disable-line no-console\n      })\n    }\n  }\n\n  if (window.document$) {\n    // Material specific hook\n    window.document$.subscribe(main)\n  } else {\n    // Normal non-Material specific hook\n    document.addEventListener(\"DOMContentLoaded\", main)\n  }\n})()\n","export default (className, mode) => {\n  if (mode === 'katex') {\n    const maths = document.querySelectorAll(`.${className}`)\n\n    for (let i = 0; i < maths.length; i++) {\n      const tex = maths[i].textContent || maths[i].innerText\n\n      if (tex.startsWith('\\\\(') && tex.endsWith('\\\\)')) {\n        katex.render(tex.slice(2, -2), maths[i], {'displayMode': false})\n      } else if (tex.startsWith('\\\\[') && tex.endsWith('\\\\]')) {\n        katex.render(tex.slice(2, -2), maths[i], {'displayMode': true})\n      }\n    }\n  } else if (mode === 'mathjax') {\n    MathJax.typesetPromise()\n  }\n}\n"],"names":["umlPromise","mathPromise","observer","main","uml","className","MermaidDiv","_HTMLElement","_inherits","_super","_this","_classCallCheck","this","shadow","call","attachShadow","mode","style","document","createElement","textContent","appendChild","_wrapNativeSuper","HTMLElement","customElements","get","define","defaultConfig","startOnLoad","theme","flowchart","htmlLabels","er","useMaxWidth","sequence","noteFontWeight","actorFontSize","messageFontSize","mermaid","mermaidAPI","globalReset","scheme","querySelector","getAttribute","err","config","mermaidConfig","initialize","blocks","querySelectorAll","concat","surrogate","_loop","i","block","parentEl","tagName","toLowerCase","shadowRoot","temp","visibility","display","padding","margin","lineHeight","fontSize","render","parent","text","j","childNodes","length","subEl","k","child","nodeName","test","nodeValue","getFromCode","content","el","innerHTML","parentNode","insertBefore","removeChild","contains","arithmatex","maths","tex","innerText","startsWith","endsWith","katex","slice","displayMode","MathJax","typesetPromise","Promise","resolve","MutationObserver","mutations","forEach","mutation","type","target","localStorage","setItem","observe","attributeFilter","then","console","log","window","document$","subscribe","addEventListener"],"mappings":"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"}